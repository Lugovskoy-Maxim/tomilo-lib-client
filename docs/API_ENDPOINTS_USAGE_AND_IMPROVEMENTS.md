# Использование эндпоинтов API и идеи для привлекательности сайта

Обход клиента по эндпоинтам из **Tomilo Library Server API** и рекомендации.

---

## Что уже используется

- **App**: `GET /health` — не вызывается с фронта (можно использовать для статус-страницы).
- **App**: `GET /stats` — использовался только в админке; **теперь также выводится на главной** в блоке «Платформа в цифрах» (тайтлы, главы, пользователи, просмотры).
- **Auth**: логин, регистрация, Yandex/VK/VK ID, смена пароля — используются.
- **Users**: профиль, закладки (все категории), история чтения (в т.ч. read-ids, очистка), аватар — используются. Админские эндпоинты пользователей и bot detection — в админке.
- **Titles**: popular, latest-updates, search, filters, by id/slug, views, rating, create/update/delete, top/day|week|month, random, recommended, collections — используются.
- **Chapters**: CRUD, по тайтлу, next/prev, by number, latest, view, pages, bulk-delete — используются.
- **Search**: `GET /search` и поиск через titles — используются.
- **Shop**: decorations, by type, profile/decorations, purchase, equip/unequip — используются (инвентарь, рамки).
- **Notifications**: список, unread-count, read, mark-all-read, delete — используются.

---

## Эндпоинты, которые не используются или используются не полностью

### 1. `GET /titles/user/reading-progress`

- **Сейчас:** блок «Продолжить чтение» на главной строится из **истории чтения** (`GET /users/profile/history` с пагинацией/light) и пересчёта прогресса на клиенте.
- **Идея:** заменить или дополнить вывод данными с `GET /titles/user/reading-progress`, если бэкенд отдаёт готовый прогресс (текущая глава, всего глав, «новые с последнего чтения»). Так можно упростить код и уменьшить объём данных.

### 2. `GET /titles/titles/recent`

- **Сейчас:** на главной есть «Последние обновления» (`GET /titles/titles/latest-updates`) — свежие главы. Отдельного блока «Недавно добавленные тайтлы» нет.
- **Идея:** добавить секцию «Недавно добавленные» с `GET /titles/titles/recent` — тайтлы, недавно попавшие в каталог. Усиливает ощущение «живого» каталога.

### 3. `GET /users/profile/stats`

- **Сейчас:** в профиле статистика (глав прочитано, закладки, уровень, опыт, баланс) считается из полного профиля (bookmarks, readingHistory, level, experience, balance).
- **Идея:** если бэкенд отдаёт в `GET /users/profile/stats` более точные или расширенные метрики — подключать этот эндпоинт для блока статистики в профиле (и при необходимости кэшировать отдельно).

### 4. `GET /` (Hello World) и `GET /health`

- **Сейчас:** не используются на фронте.
- **Идея:** использовать `GET /health` на странице «Статус сервиса» или в футере (индикатор «Сервер доступен»). Улучшает доверие и прозрачность.

### 5. Данные из `GET /stats`, которые есть только в админке

- На главной теперь показываются: totalTitles, totalChapters, totalUsers, totalViews.
- В ответе `/stats` также есть: **daily / weekly / monthly** (просмотры, новые пользователи, новые тайтлы/главы), **popularTitles**, **popularChapters**, **activeUsersToday**, **ongoingTitles**, **completedTitles**, **averageRating** и т.д.
- **Идеи для привлекательности:**
  - В футере или на главной: короткая строка вроде «Сегодня прочитано N глав» или «Активных читателей сегодня: N» (из `daily.chaptersRead` и `activeUsersToday`).
  - Секция «Популярные главы на этой неделе» на главной или на странице обновлений — по `popularChapters` из `/stats`.
  - На странице «О нас» или главной: «В библиотеке N онгоингов и M завершённых тайтлов» (`ongoingTitles`, `completedTitles`).

---

## Уже сделанное улучшение

- **Блок «Платформа в цифрах» на главной** — использует `GET /stats` и показывает: количество тайтлов, глав, читателей и просмотров. Повышает привлекательность и доверие к платформе без перегрузки главной.

---

## Краткий чеклист по привлекательности

| Эндпоинт / данные              | Использование сейчас     | Рекомендация                                      |
|--------------------------------|---------------------------|---------------------------------------------------|
| `GET /stats`                   | Админка + главная (блок)  | ✅ Сделано                                        |
| `GET /titles/user/reading-progress` | Не используется   | Подключить для «Продолжить чтение» (опционально)  |
| `GET /titles/titles/recent`    | Не используется           | Секция «Недавно добавленные» на главной/каталоге  |
| `GET /users/profile/stats`     | Не используется           | Профиль — расширенная статистика                  |
| `GET /health`                  | Не используется           | Страница или индикатор статуса сервиса           |
| `popularChapters`, `daily.*`, `activeUsersToday` из `/stats` | Только админка | Футер/главная: «сегодня прочитано», «активных читателей», «популярные главы» |

При необходимости можно постепенно внедрять пункты из таблицы — все они опираются на уже существующие эндпоинты API.
